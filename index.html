<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GhostSurf</title>
  <style>
    :root {
      --bg: #050711;
      --card: rgba(255, 255, 255, 0.05);
      --border: rgba(255, 255, 255, 0.08);
      --text: #f2f5ff;
      --muted: #9aa3bd;
      --accent: #7ce7c8;
      --accent-2: #7ab3ff;
      --danger: #ff7b7b;
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 15% 20%, rgba(124, 231, 200, 0.09), transparent 38%),
        radial-gradient(circle at 80% 10%, rgba(122, 179, 255, 0.1), transparent 45%),
        radial-gradient(circle at 45% 80%, rgba(124, 231, 200, 0.07), transparent 50%),
        var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
    }

    .shell {
      width: min(720px, 100%);
      background: linear-gradient(140deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 28px;
      box-shadow: 0 18px 70px rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(12px);
      transform: translateY(14px);
      opacity: 0;
      animation: floatIn 600ms ease forwards;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
    }

    .brand {
      font-size: 26px;
      letter-spacing: 0.6px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
    }

    .tag {
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(124, 231, 200, 0.1);
      color: var(--accent);
      font-size: 12px;
      border: 1px solid rgba(124, 231, 200, 0.3);
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);
    }

    .card + .card { margin-top: 14px; }

    .title {
      font-size: 20px;
      margin: 0 0 6px;
    }

    .muted { color: var(--muted); margin: 0 0 12px; }

    .search-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }

    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.04);
      color: var(--text);
      font-size: 15px;
      outline: none;
      transition: border-color 160ms ease, transform 160ms ease, box-shadow 180ms ease;
    }

    input:focus {
      border-color: var(--accent);
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(124, 231, 200, 0.16);
    }

    button {
      padding: 13px 18px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #041220;
      font-weight: 700;
      letter-spacing: 0.3px;
      box-shadow: 0 14px 35px rgba(122, 179, 255, 0.28);
      transition: transform 150ms ease, box-shadow 180ms ease;
    }

    button:hover { transform: translateY(-1px); box-shadow: 0 16px 40px rgba(124, 231, 200, 0.28); }
    button:active { transform: translateY(0); }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .chip {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      font-size: 13px;
      cursor: pointer;
      transition: transform 140ms ease, border-color 160ms ease;
    }

    .chip:hover { transform: translateY(-1px); border-color: rgba(124, 231, 200, 0.4); }

    .links {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    .link-card {
      border-radius: 12px;
      border: 1px solid var(--border);
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      text-decoration: none;
      transition: transform 140ms ease, border-color 160ms ease;
      display: block;
      cursor: pointer;
    }

    .link-card:hover { transform: translateY(-1px); border-color: rgba(124, 231, 200, 0.5); }

    .status {
      margin-top: 10px;
      color: var(--muted);
      font-size: 14px;
      min-height: 20px;
    }

    .status.error { color: var(--danger); }
    .status.success { color: var(--accent); }

    .viewer {
      margin-top: 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      overflow: hidden;
      background: rgba(255, 255, 255, 0.04);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      transition: max-height 240ms ease, opacity 240ms ease;
      max-height: 0;
      opacity: 0;
    }

    .viewer.active {
      max-height: 780px;
      opacity: 1;
    }

    .viewer iframe {
      display: block;
      width: 100%;
      height: 720px;
      border: none;
      background: #0a0f1f;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(5, 7, 17, 0.8);
      backdrop-filter: blur(12px);
      display: grid;
      place-items: center;
      z-index: 10;
      transition: opacity 240ms ease;
    }

    .overlay.hide { opacity: 0; pointer-events: none; }

    .lock-card {
      width: min(360px, 90vw);
      padding: 22px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0 14px 50px rgba(0, 0, 0, 0.35);
      text-align: center;
      animation: floatIn 420ms ease;
    }

    .lock-card h2 { margin: 0 0 10px; }
    .lock-card p { margin: 0 0 14px; color: var(--muted); }

    @keyframes floatIn {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <div class="brand">GhostSurf <span class="tag">Scramjet mode</span></div>
      <div class="muted">Open sites through the Scramjet in-browser client</div>
    </header>

    <section class="card">
      <h2 class="title">Search or go</h2>
      <p class="muted">Type a query or paste a URL. Scramjet loads right below so you stay on this page.</p>
      <form class="search" autocomplete="off">
        <div class="search-row">
          <input id="query" type="text" placeholder="Search the web or enter a link" />
          <button type="submit">Launch</button>
        </div>
      </form>
      <div class="chips" id="chips"></div>
      <div class="status" id="status"></div>
      <div class="viewer" id="viewer">
        <iframe id="scramjet-frame" title="Scramjet" loading="lazy" sandbox="allow-scripts allow-forms allow-same-origin allow-popups allow-downloads"></iframe>
      </div>
    </section>

    <section class="card">
      <h3 class="title">Quick jumps</h3>
      <p class="muted">Popular spots in one tap.</p>
      <div class="links" id="links"></div>
    </section>
  </div>

  <div class="overlay" id="lock">
    <div class="lock-card">
      <h2>Login required</h2>
      <p>Enter the access password to unlock GhostSurf.</p>
      <form id="lock-form">
        <input id="lock-pass" type="password" placeholder="Password" autocomplete="current-password" />
        <div style="height: 10px"></div>
        <button type="submit" style="width: 100%">Unlock</button>
      </form>
      <div class="status" id="lock-status"></div>
    </div>
  </div>

  <script>
    const PASSWORD = "Theone42";
    const KEY_UNLOCKED = "ghostsurf-unlocked";
    const SCRAMJET_ENDPOINT = "https://mercuryworkshop.github.io/scramjet/";
    const queryInput = document.getElementById("query");
    const statusEl = document.getElementById("status");
    const chipsEl = document.getElementById("chips");
    const linksEl = document.getElementById("links");
    const viewer = document.getElementById("viewer");
    const frame = document.getElementById("scramjet-frame");
    const lockLayer = document.getElementById("lock");
    const lockStatus = document.getElementById("lock-status");
    const lockPass = document.getElementById("lock-pass");
    let loadTimer;

    const presets = [
      "fun free games",
      "retro emulators",
      "math puzzles",
      "space news",
      "cool wallpapers",
      "coding sandboxes"
    ];

    const quickLinks = [
      { label: "Itch.io games", url: "https://itch.io/games" },
      { label: "Classic Reload", url: "https://www.classicreload.com/" },
      { label: "CoolMath Games", url: "https://www.coolmathgames.com/" },
      { label: "Archive.org", url: "https://archive.org/" },
      { label: "Wikipedia", url: "https://wikipedia.org" },
      { label: "YouTube", url: "https://youtube.com" }
    ];

    function setStatus(msg, type = "") {
      statusEl.textContent = msg;
      statusEl.className = `status ${type}`;
    }

    function setLockStatus(msg, type = "") {
      lockStatus.textContent = msg;
      lockStatus.className = `status ${type}`;
    }

    function normalizeQuery(input) {
      const value = input.trim();
      if (!value) return "";
      const looksLikeUrl = /\./.test(value) && !/\s/.test(value);
      if (looksLikeUrl) {
        return value.startsWith("http://") || value.startsWith("https://") ? value : `https://${value}`;
      }
      const encoded = encodeURIComponent(value);
      return `https://duckduckgo.com/?q=${encoded}`;
    }

    function buildScramjetUrl(targetUrl) {
      const scramjetUrl = new URL(SCRAMJET_ENDPOINT);
      scramjetUrl.searchParams.set("url", targetUrl);
      return scramjetUrl.toString();
    }

    function showFrame() {
      if (!viewer.classList.contains("active")) {
        viewer.classList.add("active");
      }
    }

    function launch(url) {
      if (!url) {
        setStatus("Type something first.", "error");
        queryInput.focus();
        return;
      }

      if (loadTimer) {
        clearTimeout(loadTimer);
      }

      const scramjetUrl = buildScramjetUrl(url);
      showFrame();
      setStatus("Loading with Scramjet...", "");
      frame.src = scramjetUrl;
      loadTimer = setTimeout(() => {
        setStatus("If it looks stuck, use the fallback links below.", "error");
        addFallbackLink(scramjetUrl, true);
        addFallbackLink(url, false);
      }, 8000);

      frame.onload = () => {
        clearTimeout(loadTimer);
        setStatus("Running inside Scramjet.", "success");
      };
    }

    function addFallbackLink(url, scramjetPreferred) {
      let label = scramjetPreferred ? "Open with Scramjet" : "Open link directly";
      try {
        const host = new URL(url).hostname;
        label = scramjetPreferred ? `Open via Scramjet (${host})` : `Open ${host}`;
      } catch (_) {}
      const link = document.createElement("a");
      link.href = url;
      link.textContent = label;
      link.className = "link-card";
      link.target = "_blank";
      link.rel = "noreferrer";
      linksEl.prepend(link);
    }

    document.querySelector("form.search").addEventListener("submit", (e) => {
      e.preventDefault();
      setStatus("Launching...", "");
      const url = normalizeQuery(queryInput.value);
      launch(url);
    });

    presets.forEach((text) => {
      const chip = document.createElement("button");
      chip.type = "button";
      chip.textContent = text;
      chip.className = "chip";
      chip.addEventListener("click", () => {
        queryInput.value = text;
        queryInput.focus();
      });
      chipsEl.appendChild(chip);
    });

    quickLinks.forEach(({ label, url }) => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.textContent = label;
      btn.className = "link-card";
      btn.style.textAlign = "left";
      btn.addEventListener("click", () => launch(url));
      linksEl.appendChild(btn);
    });

    function unlock() {
      lockLayer.classList.add("hide");
      setTimeout(() => lockLayer.remove(), 260);
      queryInput.focus();
      localStorage.setItem(KEY_UNLOCKED, "1");
    }

    document.getElementById("lock-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const val = lockPass.value.trim();
      if (val === PASSWORD) {
        setLockStatus("Unlocked.", "success");
        unlock();
      } else {
        setLockStatus("Wrong password.", "error");
        lockPass.focus();
      }
    });

    if (localStorage.getItem(KEY_UNLOCKED) === "1") {
      unlock();
    } else {
      lockPass.focus();
    }
  </script>
</body>
</html>
