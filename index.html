<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MARSHALL06178</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap');

    :root {
      --bg: radial-gradient(circle at 15% 20%, rgba(141, 212, 255, 0.12), transparent 34%),
        radial-gradient(circle at 80% 10%, rgba(126, 165, 255, 0.14), transparent 38%),
        radial-gradient(circle at 40% 75%, rgba(120, 244, 201, 0.16), transparent 52%),
        #060912;
      --panel: rgba(255, 255, 255, 0.04);
      --panel-strong: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.09);
      --text: #f3f7ff;
      --muted: #9baac6;
      --accent: #7ce0c4;
      --accent-2: #7ba6ff;
      --danger: #ff9b9b;
      --radius: 18px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
      color: var(--text);
      padding: 28px 12px 40px;
      letter-spacing: 0.1px;
    }

    .shell {
      width: min(1200px, 100%);
      background: linear-gradient(140deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
      border: 1px solid var(--border);
      border-radius: 26px;
      padding: 24px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(12px);
      animation: rise 620ms cubic-bezier(0.16, 1, 0.3, 1);
    }

    header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 30px;
      font-weight: 800;
    }

    .badge { padding: 7px 11px; border-radius: 999px; background: rgba(124, 224, 196, 0.16); color: var(--accent); border: 1px solid rgba(124, 224, 196, 0.34); box-shadow: 0 12px 30px rgba(124, 224, 196, 0.18); font-size: 12px; }
    .muted { color: var(--muted); }

    .grid { display: grid; grid-template-columns: 1.35fr 1fr; gap: 14px; }
    @media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }

    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      animation: fadeUp 600ms ease both;
    }

    .card h2 { margin: 0 0 8px; letter-spacing: 0.15px; }
    .card p { margin: 0 0 12px; color: var(--muted); }

    .search-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
    input[type="text"], input[type="password"], select {
      width: 100%;
      padding: 14px 15px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
      font-size: 15px;
      outline: none;
      transition: border-color 160ms ease, transform 180ms ease, box-shadow 190ms ease, background 170ms ease;
    }

    input:focus, select:focus { border-color: var(--accent); transform: translateY(-1px); box-shadow: 0 12px 26px rgba(124, 231, 200, 0.18); background: rgba(255, 255, 255, 0.08); }

    button {
      padding: 13px 16px;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #041220;
      font-weight: 800;
      letter-spacing: 0.2px;
      box-shadow: 0 16px 34px rgba(122, 179, 255, 0.25);
      transition: transform 150ms ease, box-shadow 180ms ease, filter 160ms ease;
    }

    button:hover { transform: translateY(-1px); box-shadow: 0 18px 40px rgba(124, 231, 200, 0.25); }
    button:active { transform: translateY(0); }

    .button-ghost { background: rgba(255, 255, 255, 0.05); color: var(--text); box-shadow: none; border: 1px solid rgba(255, 255, 255, 0.12); }
    .button-danger { background: var(--danger); color: #1f0b0b; box-shadow: none; }

    .chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .chip { padding: 9px 12px; border-radius: 999px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.05); color: var(--text); font-size: 13px; cursor: pointer; transition: transform 160ms ease, border-color 170ms ease, background 170ms ease; }
    .chip:hover { transform: translateY(-1px); border-color: rgba(124, 224, 196, 0.6); background: rgba(124, 224, 196, 0.1); }

    .links { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; margin-top: 8px; }
    .link-tile { padding: 12px 13px; border-radius: 14px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.05); color: var(--text); text-decoration: none; transition: transform 150ms ease, border-color 170ms ease, background 170ms ease; display: block; }
    .link-tile:hover { transform: translateY(-1px); border-color: rgba(124, 224, 196, 0.5); background: rgba(124, 224, 196, 0.08); }

    .toolbar { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
    .toolbar button { padding: 11px 12px; font-size: 13px; }

    .viewer-wrap { position: relative; border-radius: 18px; overflow: hidden; border: 1px solid var(--border); background: var(--panel-strong); min-height: 360px; }
    iframe { width: 100%; height: 100%; border: none; background: #0b101c; }

    .status { margin-top: 6px; font-size: 13px; color: var(--muted); min-height: 18px; }
    .pill { display: inline-flex; align-items: center; gap: 6px; padding: 8px 11px; border-radius: 999px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.06); margin-right: 6px; font-size: 13px; }
    .pill.danger { border-color: rgba(255, 155, 155, 0.35); color: var(--danger); background: rgba(255, 155, 155, 0.1); }

    .lock-screen {
      position: fixed;
      inset: 0;
      background: rgba(4, 6, 13, 0.78);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99;
      opacity: 1;
      transition: opacity 220ms ease;
    }

    .lock-screen.hidden { opacity: 0; pointer-events: none; }

    .lock-card {
      width: min(420px, 90%);
      background: linear-gradient(150deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 22px 20px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.5);
      text-align: center;
      animation: rise 620ms ease;
    }

    .lock-card h2 { margin: 0 0 6px; }
    .lock-card p { margin: 0 0 12px; color: var(--muted); }
    .lock-card .hint { font-size: 13px; margin-bottom: 10px; }

    .toggle { display: flex; align-items: center; gap: 8px; margin-top: 8px; font-size: 13px; color: var(--muted); justify-content: center; }
    .toggle input { width: 16px; height: 16px; }

    @keyframes rise { from { transform: translateY(12px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes fadeUp { from { transform: translateY(8px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body>
  <div class="shell" aria-live="polite">
    <header>
      <div class="brand">MARSHALL06178 <span class="badge">Scramjet</span></div>
      <div class="muted">Stay on-page, bypass blocks, launch faster.</div>
    </header>

    <div class="grid">
      <div>
        <div class="card">
          <h2>Launch</h2>
          <p class="muted">Type a link or search and send it through the Scramjet relay. The viewer stays here.</p>
          <div class="search-row">
            <input type="text" id="input" placeholder="Enter URL or search" autocomplete="off" />
            <button id="launch">Open</button>
          </div>
          <div class="chips" id="chips"></div>
          <div class="toolbar">
            <select id="endpoint"></select>
            <button class="button-ghost" id="retry">Retry</button>
            <button class="button-ghost" id="clear">Clear</button>
            <button class="button-ghost" id="fullscreen">Fullscreen</button>
            <button class="button-ghost" id="bypass">Bypass popout</button>
          </div>
          <div class="status" id="status"></div>
        </div>

        <div class="card">
          <h2>Shortcuts</h2>
          <p class="muted">Quick jump into favorites through Scramjet.</p>
          <div class="links" id="links"></div>
        </div>
      </div>

      <div>
        <div class="card viewer-card">
          <h2>Viewer</h2>
          <div class="viewer-wrap">
            <iframe id="frame" title="Scramjet viewer" sandbox="allow-scripts allow-forms allow-same-origin allow-popups allow-modals allow-downloads"></iframe>
          </div>
          <div class="status" id="frameStatus"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="lock-screen" id="lock">
    <div class="lock-card">
      <h2>Access Check</h2>
      <p>Enter the MARSHALL06178 key to continue.</p>
      <input type="password" id="lockInput" placeholder="Password" autocomplete="current-password" />
      <div class="toggle"><input type="checkbox" id="remember" /> <label for="remember">Stay unlocked on this device</label></div>
      <div class="hint" id="lockHint">Hint: Key changes often. Current key ends with 42.</div>
      <button id="unlock">Unlock</button>
      <button class="button-ghost" id="resetPass">Reset saved key</button>
      <div class="status" id="lockStatus"></div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'marshall-unlock';
    const PASSWORD = 'Diddy_42';
    const input = document.getElementById('input');
    const launchBtn = document.getElementById('launch');
    const chips = document.getElementById('chips');
    const links = document.getElementById('links');
    const frame = document.getElementById('frame');
    const status = document.getElementById('status');
    const frameStatus = document.getElementById('frameStatus');
    const endpointSelect = document.getElementById('endpoint');
    const retryBtn = document.getElementById('retry');
    const clearBtn = document.getElementById('clear');
    const fullscreenBtn = document.getElementById('fullscreen');
    const bypassBtn = document.getElementById('bypass');
    const lock = document.getElementById('lock');
    const lockInput = document.getElementById('lockInput');
    const lockStatus = document.getElementById('lockStatus');
    const unlockBtn = document.getElementById('unlock');
    const remember = document.getElementById('remember');
    const resetPass = document.getElementById('resetPass');

    const endpoints = [
      { label: 'Worker mirror (default)', url: 'https://scramjet.workers.dev/?url=' },
      { label: 'Scramjet main', url: 'https://scramjet.tech/?url=' },
      { label: 'Proxy mirror', url: 'https://scramjet-proxy.pages.dev/?url=' },
    ];

    const presets = ['https://coolmathgames.com', 'https://poki.com', 'https://google.com', 'https://youtube.com', 'https://classroom.google.com', 'https://tetris.com/play-tetris']
      .map(url => ({ label: new URL(url).hostname.replace('www.', ''), url }));

    const shortcutGroups = [
      { label: 'Games', urls: ['https://poki.com', 'https://www.coolmathgames.com', 'https://krunker.io', 'https://retrobowl.me'] },
      { label: 'Study', urls: ['https://google.com', 'https://wikipedia.org', 'https://quizlet.com', 'https://notion.so'] },
      { label: 'Tools', urls: ['https://replit.com', 'https://github.com', 'https://drive.google.com', 'https://classroom.google.com'] },
    ];

    function normalize(text) {
      if (!text) return '';
      const trimmed = text.trim();
      if (/^https?:\/\//i.test(trimmed)) return trimmed;
      if (/^[\w.-]+\.[A-Za-z]{2,}/.test(trimmed)) return `https://${trimmed}`;
      return `https://www.google.com/search?q=${encodeURIComponent(trimmed)}`;
    }

    function setStatus(message, danger = false) {
      status.innerHTML = message ? `<span class="pill ${danger ? 'danger' : ''}">${message}</span>` : '';
    }

    function setFrameStatus(message, danger = false) {
      frameStatus.innerHTML = message ? `<span class="pill ${danger ? 'danger' : ''}">${message}</span>` : '';
    }

    function load(url) {
      const endpoint = endpoints[endpointSelect.selectedIndex]?.url || endpoints[0].url;
      const target = normalize(url || input.value);
      if (!target) return;
      const scramUrl = `${endpoint}${encodeURIComponent(target)}`;
      frame.src = scramUrl;
      setStatus(`Loading via ${endpointSelect.options[endpointSelect.selectedIndex].textContent}`);
      setFrameStatus('Loading...');
      frame.dataset.target = target;
    }

    function retryLoad() {
      if (frame.dataset.target) {
        load(frame.dataset.target);
      } else {
        load(input.value);
      }
    }

    function clearViewer() {
      frame.src = 'about:blank';
      frame.dataset.target = '';
      setStatus('Cleared');
      setFrameStatus('');
    }

    function fullscreen() {
      if (frame.requestFullscreen) {
        frame.requestFullscreen();
      }
    }

    function bypassPopout() {
      const target = frame.dataset.target || normalize(input.value);
      if (!target) return setStatus('Nothing to launch', true);
      const endpoint = endpoints[endpointSelect.selectedIndex]?.url || endpoints[0].url;
      const scramUrl = `${endpoint}${encodeURIComponent(target)}`;
      const win = window.open('about:blank', '_blank');
      if (!win) {
        setStatus('Popup blocked — allow popups to bypass.', true);
        return;
      }
      const doc = win.document;
      doc.write(`<!doctype html><title>Loading...</title><style>html,body{margin:0;height:100%;background:#050910;}iframe{border:0;width:100%;height:100%;}</style><iframe src="${scramUrl}" allowfullscreen allow="clipboard-read; clipboard-write; fullscreen"></iframe>`);
      doc.close();
      setStatus('Bypass popout opened');
    }

    function buildChips() {
      chips.innerHTML = '';
      presets.forEach(({ label, url }) => {
        const chip = document.createElement('div');
        chip.className = 'chip';
        chip.textContent = label;
        chip.onclick = () => load(url);
        chips.appendChild(chip);
      });
    }

    function buildLinks() {
      links.innerHTML = '';
      shortcutGroups.forEach(group => {
        const tile = document.createElement('a');
        tile.className = 'link-tile';
        tile.textContent = `${group.label} → ${group.urls.length} sites`;
        tile.href = '#';
        tile.onclick = e => {
          e.preventDefault();
          const pick = group.urls[Math.floor(Math.random() * group.urls.length)];
          load(pick);
        };
        links.appendChild(tile);
      });
    }

    function buildEndpoints() {
      endpoints.forEach((e, i) => {
        const opt = document.createElement('option');
        opt.value = e.url; opt.textContent = e.label;
        endpointSelect.appendChild(opt);
        if (i === 0) endpointSelect.selectedIndex = 0;
      });
      const saved = localStorage.getItem('marshall-endpoint');
      if (saved) {
        const idx = endpoints.findIndex(e => e.url === saved);
        if (idx >= 0) endpointSelect.selectedIndex = idx;
      }
      endpointSelect.onchange = () => {
        localStorage.setItem('marshall-endpoint', endpointSelect.value);
        if (frame.dataset.target) retryLoad();
      };
    }

    function handleLock() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved === PASSWORD) {
        lock.classList.add('hidden');
        return;
      }
      lock.classList.remove('hidden');
      lockInput.focus();
    }

    function unlock() {
      const val = lockInput.value.trim();
      if (!val) return;
      if (val === PASSWORD) {
        lockStatus.textContent = 'Unlocked';
        if (remember.checked) localStorage.setItem(STORAGE_KEY, val);
        lock.classList.add('hidden');
        setTimeout(() => lock.style.display = 'none', 240);
      } else {
        lockStatus.textContent = 'Incorrect password';
        lockStatus.style.color = 'var(--danger)';
      }
    }

    function resetSaved() {
      localStorage.removeItem(STORAGE_KEY);
      lockStatus.textContent = 'Saved key cleared';
      lockStatus.style.color = 'var(--text)';
      lock.classList.remove('hidden');
      lock.style.display = 'flex';
      lockInput.value = '';
      lockInput.focus();
    }

    frame.addEventListener('load', () => {
      setFrameStatus('Loaded');
    });

    frame.addEventListener('error', () => {
      setFrameStatus('Blocked or failed — try bypass popout or another endpoint', true);
    });

    launchBtn.onclick = () => load();
    retryBtn.onclick = () => retryLoad();
    clearBtn.onclick = () => clearViewer();
    fullscreenBtn.onclick = () => fullscreen();
    bypassBtn.onclick = () => bypassPopout();
    unlockBtn.onclick = () => unlock();
    resetPass.onclick = () => resetSaved();
    lockInput.addEventListener('keyup', e => { if (e.key === 'Enter') unlock(); });
    input.addEventListener('keyup', e => { if (e.key === 'Enter') load(); });

    buildChips();
    buildLinks();
    buildEndpoints();
    handleLock();
  </script>
</body>
</html>
